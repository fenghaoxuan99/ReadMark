



在 C++ 中，**指针常量**（Pointer to Constant）和 **常量指针**（Constant Pointer）

### 一、指针常量（Pointer to Constant）
**定义**：指针指向的内容是常量，不可修改，但指针本身可以指向其他地址。  
**语法形式**：  
```cpp
const int* ptr;  // 或 int const* ptr;
```  
**特点**：  
1. `const` 在 `*` 左侧，修饰的是指针指向的数据类型（如 `const int`）。  
2. **数据不可变**：不能通过指针修改指向的数据。  
3. **指针可变**：指针可以重新指向其他地址。  

**示例**：  
```cpp
int a = 10, b = 20;
const int* ptr = &a;

// *ptr = 30;    // 错误！不能修改指向的内容
ptr = &b;        // 正确！指针可以指向其他地址
```

---

### 二、常量指针（Constant Pointer）
**定义**：指针本身是常量，不可修改指向的地址，但指向的内容可以修改。  
**语法形式**：  
```cpp
int* const ptr;
```  
**特点**：  
1. `const` 在 `*` 右侧，修饰的是指针本身（即地址不可变）。  
2. **指针不可变**：指针一旦初始化后，不能再指向其他地址。  
3. **数据可变**：可以通过指针修改指向的内容。  

**示例**：  
```cpp
int a = 10, b = 20;
int* const ptr = &a;

*ptr = 30;       // 正确！可以修改指向的内容
// ptr = &b;     // 错误！指针不能指向其他地址
```

---

### 三、综合比较
| 特性               | 指针常量（`const int*`） | 常量指针（`int* const`） |
|--------------------|--------------------------|--------------------------|
| **指针指向可变**   | ✔️ 是                   | ❌ 否                   |
| **指向内容可变**   | ❌ 否                   | ✔️ 是                   |
| `const` 关键字位置 | `const` 在 `*` 左侧     | `const` 在 `*` 右侧     |

---

### 四、如何记忆？
1. **从右向左读法**：  
   - `const int* ptr` → `ptr` 是一个指针（`*`），指向 `const int`（常量整数）。  
   - `int* const ptr` → `ptr` 是一个常量（`const`），类型是 `int*`（整数指针）。  

2. **口诀**：  
   - **左定值**（左侧 `const` 修饰值，值不可变）。  
   - **右定针**（右侧 `const` 修饰指针，指针不可变）。  

---

### 五、联合使用（双重约束）
可以同时约束指针和内容：  
```cpp
const int* const ptr;  // 指针和内容都不可变
```  
- 指针不能指向其他地址。  
- 不能通过指针修改内容。  

2

# this指针

## this指针的用处：
1. 一个对象的this指针并不是对象本身的一部分，不会影响sizeof(对象)的结果。
2. this作用域是在类内部，当在类的非静态成员函数中访问类的非静态成员的时候，编译器会自动将对象本身的地址作为一个隐含参数传递给函数。也就是说，即使你没有写上this指针，编译器在编译的时候也是加上this的，它作为非静态成员函数的隐含形参，对各成员的访问均通过this进行。


## this指针的使用：
1. 在类的非静态成员函数中返回类对象本身的时候，直接使用 return *this。
2. 当参数与成员变量名相同时，如this->n = n （不能写成n = n)。

编译器把this，变为const A* const，这个大家也能想到，因为这个函数是const函数，那么针对const函数，它只能访问const变量与const函数，不能修改其他变量的值，所以需要一个this指向不能修改的变量，那就是const A*,又由于本身this是const指针，所以就为const A* const!